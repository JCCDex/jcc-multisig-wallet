# jcc-multisig-wallet

[![Build Status](https://travis-ci.com/JCCDex/jcc-multisig-wallet.svg?branch=master)](https://travis-ci.com/JCCDex/jcc-multisig-wallet)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](http://makeapullrequest.com)

关于多签钱包的内容请参见： [原始出处](./EIP.issue.md)

## 前言

EIP的讨论方案将多签名钱包参与者分为三个角色:

1. 提案人：发起提案，给出建议的交易
2. 批准人：批准提案，当符合事先定义的投票规则，则通过提案
3. 执行人：执行提案

细节上还缺乏一些考虑

1. 对于资产共管和操作来说，提案、批准和执行是同一群人比较合理，如果多签钱包用来作为商业流程中的审批流程表示的话，那确实分为三组人(角色)比较合理
2. 投票本身应该对参与人数，有效票数有个规则，这个规则是不可更改还是动态更新，也需要考虑；提案批准行为以及规则变更的提案互相混杂，会导致很复杂的情况
3. 和比特币类型的多签不同，这个多签过程是完全链上进行的，当然这个issue支持链下的秘密信息协调，但是还是引起了很大的争论
4. 执行人可以是原有人群中的一个，也可以是类似预言机这种形式
5. 提案如果没有人处理，或者恶意攻击，形成大量提案去投票，超时机制或者提案数量的扼制机制看起来就是需要的
6. 作为提案人发起的提案，理论上可以做区块链上的任何事情，简单的转账资产很容易理解的；在另外一种常见的场景中，多人共管资产参与另外一个合约的投资或者操作，也就是调用其他合约，单纯的技术上生成的calldata其实人类是难以阅读的，从业务角度上，需要在外部再次包装一次，以可视可读的人机交互界面来组装calldata
7. 提案内容每个投票人应该都能独立验证，避免发起欺诈提案蒙混过关；提案不能重复。

这个issue里面争论的问题也是我们关心的问题，如果定义一个多签的标准，应该是最本质，最小的约束，其他人可以利用这个标准进行扩展和其他标准互动，从上述罗列的问题来看，试图用一个无所不包，万能可配置的合约完成上述目标，是很困难的，而且过于复杂的合约会导致使用成本(燃料费)居高不下，对于以太坊这样的区块链，成本实在太高了。

## 多签钱包类型

我们基于上述考虑，由简单到复杂，认为应该有两种不同类型的多签钱包：用于资产共管的最简类型、用于社群管理的动态规则类型

### 最简类型 Light version

1. 创建时指定成员和有效规则，创建后不能更改
2. 成员权力平等，提案、批准和执行权力都有
3. 支持原生通证，ERC20，ERC721资产转移
4. 对于合约自杀的资产转移支持

### 动态规则类型 Full version

1. 创建时候指定成员和规则，可以在后续发起提案进行表决，增加和删除用户，修改决议有效逻辑
2. 提案，批准和执行的成员是分别指定的，当然也可以是完全相同的一组成员
3. 支持任意的访问其他合约的能力，在应用层应该提供一种能力，批准成员根据提案可以构建出一样的提案数据作为验证机制，防止欺诈
4. 成员权力平等
5. 支持原生通证，ERC20，ERC721资产转移
6. 对于合约自杀的资产转移支持

### 增强属性 Enhancements

1. 支持预言机执行提案，对于已经形成决议的提案自动执行
2. 支持批准人的权力权重不同，可以应用于企业单位领导一票否决制的流程
3. 支持随机数(待完善)
4. 支持秘密提案，仅在提案者和投票人之中共享提案内容(待完善)

## 基本功能

## 合约接口说明

## 合约流程

## 合约相关gas消耗清单

## 合约部署后的常用配置指令
